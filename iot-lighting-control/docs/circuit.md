# 回路図 - IoT照明制御

## 部品リスト
| 部品 | 型番 | 数量 | 備考 |
|------|------|------|------|
| 赤外線LED | OSI5FU5111C-40 | 1 | 940nm, Vf=1.35V, If=100mA(max) |
| 赤外線受信モジュール | OSRB38C9AA | 1 | 38kHz, Vcc=2.7-5.5V |
| NPNトランジスタ | 2SC1815-Y | 1 | hFE=120-240 |
| 抵抗 | - | 1 | 1kΩ (ベース用) |
| 抵抗 | - | 1 | 10Ω (LED電流制限用) |

---

## 1. 赤外線受信回路（リモコン学習用）

```
OSRB38C9AA ピン配置（正面から見て）
   ___
  /   \
 |     |
 | OUT |
  \___/
  | | |
  1 2 3

1: OUT (信号出力)
2: GND
3: Vcc (3.3V)
```

### 配線図
```
Raspberry Pi              OSRB38C9AA
-----------              -----------
3.3V (Pin 1)  ─────────── Vcc (Pin 3)
GND  (Pin 6)  ─────────── GND (Pin 2)
GPIO17 (Pin 11) ◄──────── OUT (Pin 1)
```

### Raspberry Pi GPIO配置
```
           3.3V  [1] [2]  5V
  (受信)GPIO17  [11][12] GPIO18 (送信PWM)
           GND   [6] ...
```

---

## 2. 赤外線送信回路（LED + トランジスタ）

### 回路図
```
                          5V (Pin 2)
                           │
                           │
                          ┌┴┐
                          │ │ R2 = 10Ω
                          └┬┘
                           │
                           ▼ IR LED (OSI5FU5111C-40)
                          ─┬─  アノード(+)
                           │   カソード(-)
                           │
                           C (コレクタ)
                          ┌┴┐
         1kΩ              │ │ 2SC1815
GPIO18 ──┤├──────────────►B─┤ │
                          └┬┘
                           E (エミッタ)
                           │
                          GND (Pin 6)
```

### 2SC1815 ピン配置（平らな面を手前）
```
    ___
   /   \
  │     │
  │     │
  └─┬─┬─┬─┘
    E B C

E: エミッタ (GND側)
B: ベース (GPIO経由で制御)
C: コレクタ (LED側)
```

### 配線詳細
```
Raspberry Pi          部品              接続先
-----------          ----              ------
5V (Pin 2)     ───── 10Ω抵抗 ─────── IR LED アノード(+)
                     IR LED カソード(-) ── 2SC1815 コレクタ(C)
GPIO18 (Pin 12) ──── 1kΩ抵抗 ─────── 2SC1815 ベース(B)
GND (Pin 6)    ───────────────────── 2SC1815 エミッタ(E)
```

---

## 3. 完全配線図（両方）

```
Raspberry Pi 3 GPIO Header
==============================

          3.3V [1]  [2] 5V ─────┐
               [3]  [4] 5V      │
               [5]  [6] GND ──┐ │
               [7]  [8]       │ │
          GND  [9]  [10]      │ │
 IR受信→ GPIO17[11] [12]GPIO18│─│── 1kΩ ── 2SC1815(B)
              [13] [14] GND   │ │
              ...             │ │
                              │ │
                              │ │    ┌─── 10Ω ── IR LED(+)
                              │ └────┤
                              │      └─── IR LED(-) ── 2SC1815(C)
                              │
                              └────────── 2SC1815(E)


IR受信モジュール (OSRB38C9AA)
    Pin1 (OUT) → GPIO17
    Pin2 (GND) → GND
    Pin3 (Vcc) → 3.3V
```

---

## 4. 注意事項

1. **極性に注意**: LEDとトランジスタには極性があります
2. **抵抗値**:
   - ベース抵抗(1kΩ): トランジスタを適切に駆動
   - LED抵抗(10Ω): 電流を約100mA程度に制限
3. **電源**: 赤外線LEDは5Vから駆動（3.3Vだと光量不足）
4. **GPIO18**: PWM対応ピンなので赤外線送信に最適

## 5. 使用GPIOまとめ

| GPIO | Pin番号 | 用途 |
|------|--------|------|
| GPIO17 | 11 | 赤外線受信 |
| GPIO18 | 12 | 赤外線送信（PWM） |
